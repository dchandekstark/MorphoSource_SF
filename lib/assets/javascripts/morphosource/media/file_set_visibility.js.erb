// if editing a record, file_set_visibility partial adds 'selected_fileset_visibility' class to radio button input with previously selected default file visibility.
function initial_value() {
  let fileVisibilityDefault = $('#media_fileset_visibility_default');
  let fileVisibilityPrivate = $('#media_fileset_visibility_restricted');
  if (fileVisibilityPrivate.hasClass('selected_fileset_visibility')) {
    fileVisibilityPrivate.prop("checked", true);
  }
  else {
    fileVisibilityDefault.prop("checked", true);
  }
}

// If work visibility 'Private' is selected, then hide the 'Private' radio button under Default File Visibility.
function file_visibility_options() {
  let workVisibilityPrivate = $('#media_visibility_restricted');
  let fileVisibilityDefault = $('#media_fileset_visibility_default');
  let fileVisibilityPrivateLi = $('#media_fileset_visibility_restricted').closest("li");

  if (workVisibilityPrivate.is(':checked')) {
    fileVisibilityPrivateLi.addClass('hidden');
    fileVisibilityDefault.prop("checked", true);
  }
  else {
    fileVisibilityPrivateLi.removeClass('hidden');
  }
}

$(document).on('turbolinks:load', function() {
  if ($('form[id*="media"]').length) {
    initial_value();
    file_visibility_options();
  }
});

$(document).on('change', '.set-access-controls', function() {
  if ($('form[id*="media"]').length) {
    file_visibility_options();
  }
});
